<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="styles.css">

  <title>Game</title>
</head>

<body>
  <div>
    <div>
    <button type="button" , onclick="remove()" , id="btn">Press to stop</button>
  </div>
    <canvas id="cv" width="500" height="500" style="border: 1px solid black;"></canvas>
  </div>
</body>
<script>
  const canvas = document.getElementById("cv");
  const ctx = canvas.getContext("2d");
  let size = canvas.width;
  let move = null;
  let pressed = false;
  //size
  let a = 0;
  let b = 0;
  //switch between the two options of rectangle going up or down
  let rand = Math.random();
  let rand2 = Math.random();
  //x and y coordinates
  let randx  = 10 +  Math.floor(Math.random()* size);
  let randy = 10 + Math.floor(Math.random()* size);
  let randx2  = 10 +  Math.floor(Math.random()* size);
  let randy2 = 10 + Math.floor(Math.random()* size);
  //to track coordinates of the two other corners
  let width1 = randx;
  let height1 = randy;
  let width2 = randx2;
  let height2 = randy2;
  let stopped = false;
  console.log(randx);
    console.log(randy);

  function clicked() {
    console.log(done);
    draw();
  }
  canvas.addEventListener('click',() => draw(event), true);
  canvas.addEventListener('mousemove',  drawmouse, false);

  function draw(e) {
    if(pressed == false) {
      move = setInterval(() => rect(), 100);
      pressed = true;
    }
  };

  function drawmouse(e) {
    var mmv = getMousePos(e)
    ctx.fillRect(mmv.x, mmv.y, 4,4);
  }

  function remove() {
    clearInterval(move);
    ctx.clearRect(0,0, canvas.width, canvas.height);
    clearInterval();
    pressed = false;
  }

  function rect() {
    ctx.clearRect(0,0, canvas.width, canvas.height);
    let rect1 = ctx.fillRect(randx, randy, a, b);
    let rect2 = ctx.fillRect(randx2, randy2, a, b)
    //need to sort out width
    if(rand > 0.5 ) {
      movementneg();
    } else {
      movementpos();
    }

  }

  function movementpos() {
    if ((width1 < canvas.width &&  width1 > 0 && height1 < canvas.width && height1 > 0) || (width2 < canvas.width &&  width2 > 0 && height2 < canvas.height && height2 > 0)){     
      a = a + 3;
      b = b + 3;
      width1 = randx + Math.abs(a);
      height1 = randy + Math.abs(b);
      width2 = randx2 +  Math.abs(a);
      height2 = randy2 + Math.abs(b);
    } else {
      stopmovement();
    }
  }
  function movementneg() {
    if ((width1 < canvas.width &&  width1 > 0 && height1 < canvas.width && height1 > 0) || (width2 < canvas.width &&  width2 > 0 && height2 < canvas.height && height2 > 0)){
      a = a - 3;
      b = b - 3;
      width1 = randx - Math.abs(a);
      height1 = randy - Math.abs(b);
      width2 = randx2 -  Math.abs(a);
      height2 = randy2 - Math.abs(b);
    } else {
      stopmovement();
    }
  }
  function getMousePos(evt) {

    var rect = canvas.getBoundingClientRect(), // abs. size of element
    scaleX = canvas.width / rect.width,    // relationship bitmap vs. element for x
    scaleY = canvas.height / rect.height;  // relationship bitmap vs. element for y

  return {
    x: (evt.clientX - rect.left) * scaleX,   // scale mouse coordinates after they have
    y: (evt.clientY - rect.top) * scaleY     // been adjusted to be relative to element
  }
}

  function stopmovement() {
    stopped = true;
    ctx.clearRect(0,0, canvas.width, canvas.height);
      a = 0;
      b = 0;
      randy = Math.floor(Math.random()* size);
      randx = Math.floor(Math.random()* size);
      randy2 = Math.floor(Math.random()* size);
      randx2 = Math.floor(Math.random()* size);
      width1 = randx;
      height1 = randy;
      width2 = randx2;
      height2 = randy2;
      rand = Math.random();
  }

</script>
</html>